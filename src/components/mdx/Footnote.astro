---
const { idName, isClosed } = Astro.props;
---

<span class:list={["footnote-container", { closed: isClosed }]}>
	<label for={idName} class="margin-toggle footnote-number"></label>
	<input type="checkbox" id={idName} class="margin-toggle" />
	<span class="footnote">
		<slot />
	</span>
</span>

<style>
	.footnote-container {
		display: inline;
	}

	.footnote {
		float: right;
		height: 1rem;
		overflow: visible;
		clear: right;
		margin-right: -38%;
		width: 33%;
		margin-top: 0;
		margin-bottom: 0;
		font-size: var(--font-size-sm);
		opacity: 90%;
		line-height: var(--leading-base);
		vertical-align: baseline;
		position: relative;
		border-left: 1px solid var(--flexoki-300);
		padding-left: 1em;
	}

	.footnote :global(a)::before,
	.footnote :global(a):hover::before,
	.footnote :global(a) {
		background: none;
		transform: none;
	}

	.footnote :global(a span) {
		font-size: var(--font-size-sm);
	}

	label {
		cursor: pointer;
	}

	.footnote-number {
		counter-increment: footnote-counter;
	}

	.footnote-number::after,
	.footnote::before {
		position: relative;
		vertical-align: baseline;
	}

	.footnote-number::after {
		content: counter(footnote-counter);
		padding: 0.15rem;
		font-family: var(--font-sans);
		font-size: 1rem;
		color: var(--color-sea-blue);
		font-weight: 600;
		line-height: 0;
		position: relative;
		top: -6px;
		left: 2px;
		width: 24px;
		height: 24px;
		border-radius: 50%;
		background: transparent;
		transition: all 0.25s ease-in-out;
	}

	.footnote::before {
		content: counter(footnote-counter);
		font-size: 1rem;
		top: -0.1rem;
		font-weight: 600;
		padding-right: var(--space-2xs);
		color: var(--color-sea-blue);
		font-family: var(--font-sans);
	}

	:global(blockquote) .footnote {
		margin-right: -82%;
		min-width: 59%;
		text-align: left;
	}

	label.footnote-number {
		display: inline;
		padding-right: var(--space-3xs);
	}

	.closed label.margin-toggle:not(.footnote-number) {
		display: inline;
	}

	.footnote-container:not(.closed) label.margin-toggle:not(.footnote-number) {
		display: none;
	}

	input.margin-toggle {
		display: none;
	}

	.closed .footnote {
		display: none;
	}

	.footnote-container:not(.closed) .footnote {
		display: unset;
	}

	.closed .margin-toggle:checked + .footnote {
		display: block;
		float: left;
		left: 0;
		clear: both;
		width: 99%;
		margin: 1rem 0;
		height: auto;
		position: relative;
	}

	@media (max-width: 1420px) {
		.footnote {
			position: static;
			left: auto;
			width: 100%;
			margin: var(--space-xs) 0;
			border-left: none;
			padding-left: 0;
			display: none;
		}

		.footnote-container {
			display: inline;
		}

		label.margin-toggle:not(.footnote-number) {
			display: inline;
		}

		.margin-toggle:checked + .footnote {
			display: block;
			float: left;
			left: 0;
			clear: both;
			width: 99%;
			margin: 1rem 0;
			height: auto;
			position: relative;
		}

		.footnote-container:not(.closed) .footnote {
			display: none;
		}

		.footnote-container:not(.closed) .margin-toggle:checked + .footnote {
			display: block;
		}
	}

	.footnote :global(a) {
		word-wrap: break-word;
		overflow-wrap: break-word;
		white-space: normal;
		display: inline;
	}
</style>
